---
layout: blog
title: shouhai theory
---

<header>
  <h2>{{ page.title }}</h2>
</header>

I haven't seen any theory out there for shouhai. For context, shouhai is a riichi game mode where you start out with one less tile, so you are playing with a 12-tile hand. In return, you get an invisible "joker" tile as your 13th tile that you can use to complete a regular 14-tile hand.

Because the goal can be considered as "getting to tenpai", shouhai theory is essentially iishanten wait analysis. That is, your final waits in shouhai is the wait going from iishanten to tenpai. We will classify and analyze all the iishanten types, of which there are four:

- Five pairs
- Kokushi
- Two completed groups (2-mentsu)
- Three completed groups (3-mentsu)

### Five pairs

Chiitoitsu is really simple. You win as soon as you get 6 pairs (plus a floating tile, which your joker tile completes as the 7th pair). So tenpai is really getting five pairs, with two floating tiles serving as your tanki waits.

Five pair iishanten is 6 outs, 3 for each tanki pair. There is nothing else to say for now, but we will come back to five pair hands at the end.

### Kokushi

Kokushi is similar, and much easier to achieve, thanks to the invisible joker completing a missing terminal/honor even if all four have been dealt.

To get kokushi iishanten with your 12 tiles, you either need 12 unique terminal/honors, or 11 unique terminal/honors with one of them being a pair. It's the same as regular riichi, you just need one less tile, so you probably want to go for it much more often than usual.

With the two irregular hands out of the way, we move on to the standard hand theory.

### Two completed groups (2-mentsu)

When you have two completed groups, you have six tiles remaining that make up your wait. There is essentially only one way to arrange the six tiles in order to achieve iishanten:

- One pair and two simple shapes, like 中中, 45, 89

Here a __simple shape__ is a two-tile shape, either ryanmen 45, penchan 12, kanchan 35, or a pair 44. If one of your two simple shapes is a pair, then both (or all 3) pairs contribute to the wait as a shanpon wait.

Unlike tenpai waits, with iishanten you get _two_ shapes to wait on. Assume your pair is 中中. So if you have 45 and 89, you're waiting on 367 (12 outs). If you have 45 and 88, you're waiting on 368中 (12 outs). If you have 44 and 88, you're waiting on 48中 (6 outs). Yeah, try not to have 3 pairs.

Note that your completed groups can extend your waits if they overlap one of your waits. That is, if 4 is one of your waits, then having 234 extends that wait to 1, and having 456 extends that wait to 7. For this type of iishanten, this is only relevant when extending ryanmen 34 to sanmenchan 34567, or extending shanpon 44中中 to entotsu 44456中中. So it's enough to just notice that you have sanmenchan or entotsu when you do, and otherwise you can completely ignore the two existing groups.

In summary, to maximize the wait of your iishanten when you have two completed groups, maximize the wait of your two simple shapes.

### Three completed groups (3-mentsu)

With three completed groups, that leaves only three tiles to make up your wait. Even though it's half as many tiles, the theory is much more complex. There are three ways to arrange the three tiles to achieve iishanten:

- A simple shape and a floating tile, like 349
- A ryankan, like 357
- One pair and a floating tile, like 227

I'm going to call these three arrangements __headless__, __ryankan__, and __sticky__.

__Headless__ has a pretty simple wait: it waits on the simple shape, and the floating tile serves as a tanki wait. So 349 waits on 259 (11 outs).

__Ryankan__ is when the floating tile adds onto one of the simple shape to make a 3-tile complex shape, further adding tiles to the wait. Actually, this can be in one of two forms:

- Ryankan: It extends a kanchan from e.g. 35 to 357. This acts as a second kanchan, waiting on 46. In addition, the 37 can serve as tanki waits, so this adds 37 to the wait, for a total wait of 3467 (14 outs).
- Paired simple shape: It simply duplicates one of the tiles in a simple shape, like 89 becoming 889. Now you're waiting shanpon on 8 and tanki on 9, so this adds 89 to your wait, for a total wait of 789 (10 outs). We'll see why we ignore this case in a second.

__Sticky__ is possibly the best one. If you have 227, then not only are you waiting on the pair 2 and tanki on 7, you're also waiting to turn 7 into any simple shape, so add 5689 to your wait. (This is called a taatsu wait, and we consider 7 a __sticky tile__.) Overall you are waiting on 256789 (21 outs). It's really good.

Note that the paired simple shape case is completely subsumed by the sticky case. A paired simple shape waits on the same waits as the sticky tile, except it waits on 2 less tiles since your pair is always one of the waits. So you can simply consider the paired simple shape case as a worse sticky iishanten.

Aside: In standard riichi iishanten theory there is a distinction between headless hands with a closed triplet (ankou) vs without a closed triplet, because of how it affects your tenpai wait. In shouhai we don't care at all about the potential tenpai wait since we win with _any_ tenpai, so we ignore this distinction entirely.

Like in the two-completed-groups case, our three (!) completed groups can be used to extend our existing waits. It turns out that due to our waits no longer being just simple shapes, the extension theory is much more complex here, and it's not enough to just look out for sanmenchan 34567 and entotsu 33345. We'll see why in a moment.

### Choosing between 2- and 3-mentsu

Consider the following shouhai hand:

234567m3367p23s 3p

3p is not one of our outs, but it upgrades the 2-mentsu iishanten into a 3-mentsu. Let's compare the waits. Our original 234567m3367p23s is waiting on 58p14s (16 outs). If we convert by dropping one of 67p23s, say 3s, we get 234567m33367p2s waiting on 58p2s (11 outs). Plus we lose our pinfu chances. Seems much worse, right?

This is generally true, but everything changes when extended shapes come into play.

### Extending 3-mentsu

While 3-mentsu iishanten is not much more powerful than 2-mentsu iishanten (assuming ryanmen simple shapes), the strength of 3-mentsu comes from a richer extension theory.

With 2-mentsu, we only had simple waits to consider: ryanmen, kanchan, penchan, and shanpon. These can only be extended by sequences, and some of them are not very interesting:

- Penchan 12 extended by 345: you get 12345, which is a __ryanmen__ (45)
- Kanchan 46 extended by 567: you get 45667, which is a __ryanmen__ (67)
- Ryanmen 45 extended by 678: you get 45678, which is a __sanmenchan__
- Shanpon 44中中 extended by 456: you get 44456中中, which is __entotsu__

So you only have to look out for sanmenchan and entotsu.

With 3-mentsu, we introduce the following non-simple waits:

- Tanki waits: 4 waiting on 4
- Taatsu waits: 4 waiting on 23456

Let's start with tanki waits. Tanki waits can be extended by sequences two ways, and by triplets two ways. We have:

- Tanki 4 extended by sequence 456: you get 4456, which is __aryanmen__ waiting on 47
- Tanki 4 extended by sequence 567: you get 4567, which is __nobetan__ waiting on 47
- Tanki 4 extended by triplet 555: you get 4555, which is __ryantan__ waiting on 346
- Tanki 4 extended by triplet 666: you get 4666, which is __kantan__ waiting on 45

Since headless and ryankan both feature tanki waits, it is easy to extend them. In particular, if your tanki tile is not near a completed group, it takes only one draw/discard to swap it for one near a completed group.

Sticky, on the other hand, features a taatsu wait. Taatsu waits are extended by sequences:

- Sticky 4 extended by sequence 678: you get 4678, adding 9 to the wait.
- Sticky 4 extended by sequence 567: you get 4567, __nobetan__. 4 and 7 are both sticky tiles now, adding 789 to the wait.
- Sticky 4 extended by sequence 456: you get 4456, __aryanmen__, adding 7 to the wait.

Like tanki waits, it's just one draw/discard to swap out a sticky tile, and chances are that you're getting something near a sequence. It's not unusual for a sticky wait to wait on most of a suit. For example, 2344678 waits on 23456 + 1 + 9.

Because of the upgrade potential, it is seriously worth considering taking a 3-mentsu iishanten over 2-mentsu, even if it means breaking ryanmen.

### Hybridizing 5-pair iishanten

There is a little more to say about the 5-pair iishanten. In standard riichi, you usually consider going for chiitoitsu if you have 4 or more pairs. In shouhai, this number obviously decreases to 3 or more pairs, which is much easier to get, even though the 5-pair iishanten is one of the worst, with only 6 outs. However because of the potential for 5-pair iishanten, it is worth considering certain shapes that are often overlooked in standard riichi.

Let's start off with __iipeikou__, which is the strongest shape in this category. If you're in 2-mentsu iishanten, and your two complete groups are iipeikou 334455, you can easily hybridize 2-mentsu iishanten and 5-pair iishanten. For example, 334455p2355s中中 waits on the standard 145s中, but since it is also a 5-pair hand, you are also waiting on 23s. That gives a total wait on 12345s中 (18 outs). Pretty good!

Two more common shapes are __tobi-toitsu__ 4466 and __narabi-toitsu__ 4455. If you have this plus another pair, it's time to consider 5-pair iishanten. In addition, if you do get into 2-mentsu iishanten with this as your two simple shapes, it is not so bad since they serve as both a shanpon and as a kanchan or ryanmen wait. Tobi-toitsu waits on 456中 (12 outs) and narabi-toitsu on 3456中 (14 outs). Obviously these are not as good as two ryanmen (16 outs) but you take what you can get, so look out for them.

There is also __double aryanmen__ 334566. In standard riichi, this shape is good in iishanten since it waits on 36 and upgrades into ryanmen with 2457. In shouhai, we can consider this as part of a 3-mentsu sticky iishanten where the sticky tiles are 3 and 6, so it wholesale waits on 12345678, just like the nobetan 3456. So it is very good to have even if you don't end up going for 5-pair iishanten.

Finally we have __ryankan pair__, 22466. Standard riichi likes this shape since it's waiting on 2356 to form a pair and a group. Shouhai likes this shape too for the same reasons, but also because of the two pairs it contributes -- again, if you have this plus another pair, it's time to consider 5-pair iishanten.

### Yaku considerations

Obviously, every yaku is easier to get in shouhai than in standard riichi, so in your EV calculations expect scores to be higher than usual. (Though if you're calculating EV while playing shouhai you might also consider touching grass.)

Some yaku get more benefit than others:

- Chiitoitsu: As discussed above there are many more routes to a 5-pair hand, and a 6-out tanki wait in shouhai is better than a 3-out tanki wait in standard riichi.
- Pinfu: In fact a taatsu wait in sticky iishanten is a ryanmen wait no matter what. If your sticky tile is 4, then 2356 all complete a ryanmen; just place the joker in the correct spot. This also applies to extended taatsu waits. (Here 4 is still a tanki wait, so it won't count as a ryanmen wait, unless you have aryanmen 4456 or something.)
- Sanshoku doujun: You're looking to complete only 7 of the required 8 tiles for sanshoku, which is much easier to force, especially when one of them is your sticky tile in sticky iishanten.
- Ittsu: Likewise you only need 7 of the 8 required tiles for ittsu, and it's not the end of the world if all 4 of them have been thrown. This makes ittsu much easier to get.
- Chanta/Junchan: The hardest part here is often getting keeping a pair of terminal/honors. In shouhai a single terminal/honor becomes a pair, so feel free to pon away your real terminal/honor pair since you can get one with ease.
- Sanankou: If you have a triple shanpon wait like 115588, plus another triplet, that's actually all you need for sanankou.
- Yakuhai/Shousangen: Although you can't pon with your invisible joker tile, you only need a yakuhai pair to make a triplet.
- Iipekou: No more waiting for the "correct" tile to complete this thing, your joker is always the correct tile.

Also all yakuman are much easier so definitely consider going for them more often.

### Closing

I have barely played shouhai and I pulled most of this theory out of my ass based on what I know about iishanten theory in standard riichi mahjong, so take everything I have said here with a large pinch of salt.
